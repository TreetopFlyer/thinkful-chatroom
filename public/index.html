<!doctype html>
<html>
    <head>
        <title>Chatter</title>
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css"/>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.25/angular.min.js"></script>
        <script src="//code.jquery.com/jquery-2.1.0.js"></script>
        <script src="/socket.io/socket.io.js"></script>
        <script src="main.js"></script>
        <style>
            form{
                margin:10px;
            }
            .panel{
                box-shadow:0px 3px 10px #BDBDBD;
            }
            .guessing span button{
                display:inline-block;
                margin:0px 0px 3px 0px;
            }
            canvas[ng-drawing]{
                display:block;
            }
            .panel-primary canvas[ng-drawing]{
                cursor:crosshair;
            }
            .panel.drawing{
                -moz-user-select: none;
                -khtml-user-select: none;
                -webkit-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
        </style>
    </head>
    <body ng-app="Chat">
        <div ng-controller="ControllerChat" class="container">
            <div class="row">
                
                <div class="col-sm-12">
                    <div class="jumbotron">
                        <h1>Pictionary!</h1>
                    </div>
                </div>
                
                <div class="col-sm-8">
                    
                    
                    <!-- canvas --------------------------------------------->
                    <div class="panel panel-default drawing" ng-class="{'panel-primary':(user.authenticated && user.drawing)}">
                        <div class="panel-heading">
                            <h3 class="panel-title"><i class="fa fa-pencil" aria-hidden="true"></i> Drawing</h3>
                        </div>
                        <div class="panel-body">
                            <h3 ng-show="user.authenticated && user.drawing">
                                You are <strong>drawing</strong>.
                                Your word is: <strong>{{words.correct.word}}</strong>.
                            </h3>
                            <canvas ng-drawing ng-interactive="user.drawing && user.authenticated" ng-clear="clearCanvas" width="720" height="500" style="width:720px; height:500px;"></canvas>
                            <button class="btn btn-primary" ng-click="clearCanvas();" ng-show="(user.authenticated && user.drawing)">Erase Drawing</button>
                        </div>
                    </div>
                    
                    
                    <!-- guessing --------------------------------------------->
                    <div class="panel panel-default guessing" ng-class="{'panel-primary':(user.authenticated && user.guessing)}">
                        <div class="panel-heading">
                            <h3 class="panel-title"><i class="fa fa-question-circle-o" aria-hidden="true"></i> Guessing</h3>
                        </div>
                        <div class="panel-body">
                            <h3 ng-show="user.authenticated && user.guessing">
                                You are <strong>guessing</strong>.
                                <br/>
                                Guesses remaining: <span>{{user.guesses}}</span>
                            </h3>
                            <span ng-repeat="word in words.list">
                                <button type="button" class="btn btn-success" ng-class="{'disabled':word.guessed}" ng-click="words.click(word.index);">{{word.word}}</button>
                            </span>
                        </div>
                    </div>


                </div>
                <div class="col-sm-4">
                    
                    
                    <!-- users online --------------------------------------------->
                    <div class="panel panel-default">
                        <div class="panel-heading" ng-show="members.log.length > 0">
                            <h3 class="panel-title"><i class="fa fa-users" aria-hidden="true"></i> Players Online</h3>
                        </div>
                        <ul class="Members list-group">
                            <li class="list-group-item" ng-repeat="member in members.log">
                                <span>{{member.alias}}</span>
                                <!--<span ng-show="member.drawing" class="label label-primary">Drawing!</span>-->
                                <span class="badge">{{member.points}}</span>
                            </li>
                        </ul>
                        <div class="panel-footer">
                            <form ng-submit="aliasSubmit();" ng-hide="user.authenticated">
                                <div class="input-group">
                                    <span class="input-group-addon" id="Alias">
                                        <i class="fa fa-user-plus" aria-hidden="true"></i>
                                    </span>
                                    <input type="text" class="form-control" placeholder="Username" aria-describedby="Alias" ng-model="user.alias" ng-minlength="1">
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary" type="submit">Join!</button>
                                    </span>
                                </div>
                            </form>
                            <form ng-show="user.authenticated" ng-submit="aliasRevoke();">
                                <p ng-show="user.authenticated" class="panel-title">
                                    Logged in as: <strong>{{user.alias}}</strong>
                                    <button class="btn btn-warning btn-xs" type="submit">
                                        Sign out
                                    </button>
                                </p>
                            </form>
                        </div>
                    </div>
                    
                    
                    <!-- conversation --------------------------------------------->
                    <div class="panel panel-default" ng-show="user.authenticated || messages.log.length > 0">
                        <div class="panel-heading">
                            <h3 class="panel-title"><i class="fa fa-comments-o" aria-hidden="true"></i> Chat</h3>
                        </div>
                        <ul class="Messages list-group">
                            <li class="list-group-item" ng-repeat="meta in messages.log">
                                <strong>{{meta.alias}} :</strong>
                                <span>{{meta.message}}</span>
                            </li>
                        </ul>
                        <div class="panel-footer">
                            <form ng-submit="chatSubmit();" ng-show="user.authenticated">
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Send a message ..." aria-describedby="Chat" ng-model="user.message">
                                    <span class="input-group-btn">
                                        <button class="btn btn-primary" type="submit">Chat</button>
                                    </span>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    
                </div>
            </div>
        </div>
    </body>
</html>